sap.ui.define(["sap/m/MessageToast","sap/m/MessageBox"],function(e,o){"use strict";var n={onPressEMLA:function(e){const t="https://emla-prod.launchpad.cfapps.us10.hana.ondemand.com/site/prod#CustomerData-manage?sap-ui-app-id-hint=saas_approuter_com.sap.rise.managecustomerdata&/CustomerMaster(ID=#ID#,IsActiveEntity=true)";const a="https://onb.launchpad.cfapps.eu10.hana.ondemand.com/site/onb#session-manage?sap-ui-app-id-hint=saas_approuter_session&/Sessions(ID=#ID#,IsActiveEntity=true)?layout=MidColumnFullScreen";var r=e.getSource();var l=r.getParent();var c=l.getBindingContext();var s=c.getObject();var i=r.getCustomData();var p="";i.forEach(function(e){if(e.getKey()==="action"){p=e.getValue()}});const u=s.ID;const d=this.getModel();var g=d.bindContext(`/EMLACustomers('${u}')`);g.requestObject().then(function(e){console.log("=== DEBUG INFO ===");console.log("Button pressed:",p);console.log("Customer ID:",u);console.log("Complete data:",e);console.log("Raw trackApp values from API:");console.log("  trackApp:",e.trackApp);console.log("  trackAppTP2:",e.trackAppTP2);console.log("  trackAppSH:",e.trackAppSH);console.log("=== END DEBUG ===");var o=e.emlaType;var r=o;if(o){const e=o.toLowerCase();if(e.includes("private")&&e.includes("cloud")&&e.includes("erp")){o="Private Cloud ERP"}else if(e.includes("public")&&e.includes("cloud")&&e.includes("erp")){o="Public Cloud ERP"}else if(e.includes("integration")&&e.includes("suite")){o="Integration Suite"}}if(r!==o){console.log(`Normalized emlaType '${r}' -> '${o}'`)}var l=p;n._defineAction(o,l,e,c,d,u,a,t)}.bind(this)).catch(function(e){o.error("Error: "+e.message)})},_defineAction:function(t,a,r,l,c,s,i,p){if(t){const e=t.toLowerCase();if(e.includes("private")&&e.includes("cloud")&&e.includes("erp")){t="Private Cloud ERP"}else if(e.includes("public")&&e.includes("cloud")&&e.includes("erp")){t="Public Cloud ERP"}else if(e.includes("integration")&&e.includes("suite")){t="Integration Suite"}}var u=t+"_"+a;console.log("Action Key:",u);switch(u){case"Public Cloud ERP_button1":e.show("Opening Touch Point 1 for Public Cloud ERP");n._handleTrackApp(r,l,c,s,i,"button1");break;case"Public Cloud ERP_button2":e.show("Opening Touch Point 2 for Public Cloud ERP");n._handleTrackApp(r,l,c,s,i,"button2");break;case"Integration Suite_button1":e.show("Opening Touch Point 1 for Integration Suite");n._handleTrackApp(r,l,c,s,i,"button1");break;case"Integration Suite_button2":e.show("Opening Touch Point 2 for Integration Suite");n._handleTrackApp(r,l,c,s,i,"button2");break;case"Integration Suite_button3":e.show("Opening Sales Handover for Integration Suite");n._handleTrackApp(r,l,c,s,i,"button3");break;case"Private Cloud ERP_button1":if(!r.externalID){o.warning("External ID ausente para Workflow App. Atualize o registro antes de abrir.");return}e.show("Opening Workflow App for Private Cloud ERP");var d=p.replace("#ID#",r.externalID);window.open(d,"_blank");break;case"Cloud ERP Private_button1":console.log("[Fallback] Handling 'Cloud ERP Private' variant");if(!r.externalID){o.warning("External ID ausente para Workflow App (variant). Atualize o registro antes de abrir.");return}e.show("Opening Workflow App (variant)");var g=p.replace("#ID#",r.externalID);window.open(g,"_blank");break;default:console.log("Empty button clicked, no action defined");break}},_handleTrackApp:function(n,t,a,r,l,c){var s="trackApp";var i="";var p="onbTrackApp";var u="TP1";switch(c){case"button1":s="trackApp";i=n.trackApp;p="onbTrackApp";u="TP1";break;case"button2":s="trackAppTP2";i=n.trackAppTP2;p="onbTrackAppTP2";u="TP2";break;case"button3":s="trackAppSH";i=n.trackAppSH;p="onbTrackAppSH";u="SH";break;default:s="trackApp";i=n.trackApp;p="onbTrackApp";u="TP1";break}console.log("=== FIELD CHECK DEBUG ===");console.log("Button type:",c);console.log("Field to check:",s);console.log("Field value:",i);console.log("Is field empty?",!i);console.log("Backend action:",p);console.log("Will call backend?",!i);console.log("=== END FIELD CHECK DEBUG ===");console.log("=== FIELD CHECK DEBUG ===");console.log("Button type:",c);console.log("Field to check:",s);console.log("Field value:",i);console.log("Is field empty?",!i);console.log("Backend action:",p);console.log("Will call backend?",!i);console.log("=== END FIELD CHECK DEBUG ===");if(!i){const n=a.bindContext(`/${p}(...)`);n.setParameter("ID",r);n.setParameter("sessionType",u);n.execute().then(()=>{const o=n.getBoundContext().getObject();var a=o[s]||o.trackApp;var r=l.replace("#ID#",a);window.open(r,"_blank");console.log("Generated URL:",r);e.show(`${s}: ${a}`);t.refresh()}).catch(e=>{o.error(`Error: ${e.message}`)})}else{var d=l.replace("#ID#",i);window.open(d,"_blank");console.log("Using existing URL:",d);e.show(`Opening ${s}: ${i}`)}}};return n});
//# sourceMappingURL=OpenApp.js.map